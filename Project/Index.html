<!DOCTYPE html>
<html lang="nl">

<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.0/dist/css/bootstrap.min.css"
    integrity="sha384-B0vP5xmATw1+K9KRQjQERJvTumQW0nPEzvF6L/Z6nronJ3oUOFUFpCjEUQouq2+l" crossorigin="anonymous">
  <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"
    integrity="sha384-DfXdz2htPH0lsSSs5nCTpuj/zy4C+OGpamoFVy38MVBnE+IbbVYUew+OrCXaRkfj" crossorigin="anonymous">
  </script>
  <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.1/dist/umd/popper.min.js"
    integrity="sha384-9/reFTGAW83EW2RDu2S0VKaIzap3H66lZH81PoYlFhbGU+6BZp6G7niu735Sk7lN" crossorigin="anonymous">
  </script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.0/dist/js/bootstrap.min.js"
    integrity="sha384-+YQ4JLhjyBLPDQt//I+STsc9iw4uQqACwlvpslubQzn4u2UU2UFM80nGisd026JF" crossorigin="anonymous">
  </script>
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <title>Formulier</title>
  <link rel="stylesheet" href="stijl.css">
</head>

<body>
  <h1>Registreer</h1>
  <p>Meld je aan bij Anoroc services, wij beschermen jouw software tegen malware.</p>
  <form>
    <div class="row">
      <div class="col-4">
        <div class="voornaam">
          <label for="voorNaam">Voornaam</label><br>
          <input type="text" id="voorNaam" placeholder="Uw voornaam">
        </div>
        <div class="Gebruikersnaam">
          <label for="Gebruikersnaam">Gebruikersnaam</label><br>
          <input type="text" id="Gebruikersnaam" placeholder="u911236">
        </div>
        <div class="Wachtwoord">
          <label for="Wachtwoord">Wachtwoord</label><br>
          <input type="password" id="password" placeholder="">
          <p>Het wachtwoord moet minstens 8 tekens lang zijn</p>
        </div>
        <div class="adres">
          <label for="Adres">Adres</label><br>
          <input type="text" id="Adres" placeholder="uw adres en huisnummer" style="width: 135%;">
        </div>
        <div class="Land">
          <label for="Land">Land</label><br>
          <select id="Land">
            <option value="" disabled selected hidden>Kies een land</option>
            <option value="">BelgiÃ«</option>
            <option value="">Nederland</option>
            <option value="">Frankrijk</option>
          </select>
        </div>
        <div class="Provinvcie">
          <label for="Provincie">Provincie</label><br>
          <select id="Provinvcie">
            <option value="" disabled selected hidden>Kies een provincie</option>
            <option value="Antwerpen">Antwerpen</option>
            <option value="Oost-Vlaanderen">Oost-Vlaanderen</option>
            <option value="West-Vlaanderen">West-Vlaanderen</option>
          </select>
        </div>
        <div class="opdeHoogte">
          <h2>Hou me op de hoogte</h2>
          <input type="checkbox" id="Nieuwsbrief" name="Nieuwsbrief" value="Nieuwsbrief">
          <label for="Nieuwsbrief">Inschrijven voor onze nieuwsbrief</label><br>
          <input type="checkbox" id="Voorwaarden" name="Voorwaarden" value="Voorwaarden">
          <label for="Voorwaarden">Ik ga akkoord met de algemene voorwaarden</label><br>
        </div>
      </div>
      <div class="col-4">
        <div class="Naam">
          <label for="Naam">Naam</label><br>
          <input type="text" id="Naam" placeholder="Uw naam">
        </div>
        <div class="Emailadres">
          <label for="email">E-mailadres</label><br>
          <input type="email" id="email" placeholder="mail@example.be">
        </div>
        <div class="herhaalWachtwoord" style="margin-bottom:18% ;">
          <label for="herhaalWachtwoord">Herhaal wachtwoord</label><br>
          <input type="password" id="password" placeholder="">
        </div>
        <div class="Postcode">
          <label for="Postcode">Postcode</label><br>
          <input type="text" id="Postcode">
        </div>
        <div class="Betaling">
          <h2>Betaling</h2>
          <input type="radio" id="bankingApp" name="bankingApp" value="bankingApp">
          <label for="bankingApp">Banking app</label><br>
          <input type="radio" id="Overschrijving" name="Overschrijving" value="Overschrijving">
          <label for="Overschrijving">Overschrijving</label><br>
          <input type="radio" id="visaCard" name="visaCard" value="visaCard">
          <label for="visaCard">Visa card</label><br>
          <input type="radio" id="PayPal" name="PayPal" value="PayPal">
          <label for="PayPal">PayPal</label><br>
        </div>
      </div>
      <div class="col-4">
        <div id="error">
          <h4>Yikes, errors...</h4>
          <p id="errors"></p>
        </div>
        <div id="succes">
          <h4>Goed gedaan!</h4>
          <p id="succes">Aww yeah, je werd geregistreerd. </p>
        </div>
        <div id="betalingsmethode">
          <h4>Betalingswijze</h4>
          <p id="betalingsmethode"></p>
        </div>
      </div>
    </div>
    <button id="btnValideer" onclick="validateForm()">Wave your magic wand</button>




  </form>
  <script>
    //errors verbergen
    //link naar informatie over de code-->https://stackoverflow.com/questions/17357630/how-can-i-show-hide-a-specific-alert-with-twitter-bootstrap
    $("error").hide();
    $("succes").hide();
    $("info").hide();

    //controle formulier
    function validateForm() {
      //koppelen van waarden

      var voornaam = document.getElementById("voorNaam").value;
      var naam = document.getElementById("Naam").value;
      var gebruiker = document.getElementById("Gebruikersnaam").value;
      var email = document.getElementById("email").value;
      var wachtwoord = document.getElementById("password").value;
      var herhaalWachtwoord = document.getElementById("herhaalWachtwoord").value;
      var adres = document.getElementById("adres").value;
      var land = document.getElementById("land").value;
      var provincie = document.getElementById("provincie").value;
      var postcode = document.getElementById("postcode").value;
      var betalingsmethode = document.getElementsByName("betaling");

      //voorkomen van dubbele errors bij het leegmaken van het vak errors
      document.getElementById("errors")

      //array van errors aanmaken
      var errors = []

      //Controleren op lege velden
      checkEmptyField(voornaam, "Het veld voornaam is vereist!");
      checkEmptyField(naam, "Het veld naam is vereist!");
      checkEmptyField(gebruiker, "Het veld gebruikersnaam is vereist!");
      checkEmptyField(mail, "Het veld email is vereist!");
      checkEmptyField(wachtwoord, "Het veld wachtwoord is vereist!");
      checkEmptyField(herhaalWachtwoord, "Het veld herhaalWachtwoord is vereist!");
      checkEmptyField(Adres, "Het veld adres is vereist!");
      checkEmptyField(land, "Het veld land is vereist!");
      checkEmptyField(provincie, "Het veld provincie is vereist!");
      checkEmptyField(postcode, "Het veld postcode is vereist!");

      //functie om email te valideren
      validateEmail(mail);

      //gebruikersnaam valideren
      validateUsername(gebruiker);

      //wachtwoorden valideren en controle of ze hetzelfde zijn
      validatePassword(wachtwoord, herhaalWachtwoord);

      //Tonen van keuze van betaling
      validatePayment(betalingsmethode);

      //Controle of de postcode tussen de 1000 en 9999 liggen
      checkPC(postcode);

      //validatie of de checkbox van de overeenkomsten is aangeduid
      validateAgreement();

      //alerts tonen op scherm
      toonAlerts();

      //controleren op lege velden --> https://stackoverflow.com/questions/3937513/javascript-validation-for-empty-input-field
      function checkEmptyField(veld, melding) {
        if (veld == "" || veld == null) {
          errors.push(melding);
        }
      }


      //email controleren --> https://www.w3resource.com/javascript/form/email-validation.php
      function validateEmail(veld) {
        if (/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(veld)) {
          return true;
        } else {
          errors.push("E-mailadres is niet correct!");
        }
      }

      //valideren of de wachtwoorden hetzelfde zijn
      function validatePassword(wachtwoord1, wachtwoord2) {
        if (wachtwoord.length > 7 && wachtwoord2.lenght > 7) {
          errors.push("Het wachtwoord moet minstens 8 karakters lang zijn!");
        } else {
          if (wachtwoord1 != wachtwoord2) {
            errors.push("De wachtwoorden komen niet overeen!");
          }
        }
      }

      // letten op eerste karakter --> https://stackoverflow.com/questions/40840190/how-to-disallow-dot-as-first-character-in-regular-expressions & https://stackoverflow.com/questions/9628879/javascript-regex-username-validation
      function validateUsername(veld) {
        if ((/^[^.-][a-zA-Z0-9.-_,]+$/.test(veld))) {
          errors.push("Gebruikersnaam mag niet starten met een \".\" of \"-\"");
        }
      }

      // Tonen welk betalingsmiddel is gekozen doormiddel van radiobuttons --> https://www.geeksforgeeks.org/how-to-get-value-of-selected-radio-button-using-javascript/
      function validatePayment(veld) {
        for (i = 0; i < veld.length; i++) {
          if (veld[i].checked) {
            document.getElementById("betalingsmethodeinput").innerHTML = "Je betalingswijze is " + veld[i].value + ".";
          }
        }
      }

      //valideren of postcode tussen de 1000 en 9999 zit
      function checkPC(veld) {
        if (veld < 1000 || veld > 9999) {
          errors.push("de waarde van postcode moet tussen de 1000 en 9999 liggen!");
        }
      }

      //valideren of de voorwaarden zijn geaccepteerd
      function validateAgreement(veld) {
        if (document.getElementById(veld).checked) {
          errors.push("De algemene voorwaarden dienen geaccepteerd te worden!");
        }
      }

      //Alerts laten zien en verbergen
      function showAlerts() {
        if (errors.lenght > 0) {
          $("#error").show();
          $("#succes").hide();
          $("#info").hide();

          //Errors onder elkaar laten komen
          for (i = 0; i < errors.length; i++) {
            document.getElementById("errors").innerHTML += errors[i] + "<br/>";
          }
        } else {
          $("#error").hide();
          $("#succes").show();
          $("#info").show();
        }
      }

    }
  </script>

</body>

</html>